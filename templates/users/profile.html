{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "My Profile" %}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-12">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-8 mb-8 flex flex-col md:flex-row items-center gap-8">
        {% load static %}
<img src="{% if profile.profile_picture %}
            {{ profile.profile_picture.url }}
         {% elif profile.avatar %}
            {% static 'avatars/' %}{{ profile.avatar }}.png
         {% else %}
            {% static 'avatars/default.png' %}
         {% endif %}"
    class="w-32 h-32 rounded-full object-cover border-4 border-green-100"
>

        <div class="text-center md:text-left flex-grow">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white">{{ profile.full_name }}</h1>
            <p class="text-gray-500 dark:text-gray-400 mb-4">{{ profile.profession|default:"Member" }} • {{ profile.location|default:"Unknown Location" }}</p>
            <div class="flex flex-wrap justify-center md:justify-start gap-3">
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">
                    {% trans "BMI:" %} {{ profile.bmi|default:"--" }}
                </span>
                {% if profile.pregnancy_status == 'pregnant' %}
                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">
                    {{ profile.pregnancy_weeks }} {% trans "Weeks Pregnant" %}
                </span>
                {% endif %}
            </div>
        </div>
        <a href="{% url 'users:profile_edit' %}" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition">
            ✏️ {% trans "Edit Profile" %}
        </a>
    </div>

    <div class="grid md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm text-center">
            <div class="text-3xl font-bold text-green-600">{{ chat_count }}</div>
            <div class="text-gray-500 text-sm">{% trans "AI Chats" %}</div>
        </div>
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm text-center">
            <div class="text-3xl font-bold text-blue-600">{{ forum_posts }}</div>
            <div class="text-gray-500 text-sm">{% trans "Forum Posts" %}</div>
        </div>
        <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm text-center">
            <div class="text-3xl font-bold text-purple-600">{{ profile.number_of_children }}</div>
            <div class="text-gray-500 text-sm">{% trans "Children Tracked" %}</div>
        </div>
    </div>
</div>
{% endblock %}